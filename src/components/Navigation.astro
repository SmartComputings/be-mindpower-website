---
interface Props {
  currentPath?: string;
}

const { currentPath = '/' } = Astro.props;

const navItems = [
  { label: 'Inicio', href: '/' },
  { label: 'Sobre nosotros', href: '/about' },
  { label: 'Contacto', href: '/contact' },
];

const languages = [
  { label: 'English', code: 'en' },
  { label: 'Español', code: 'es', active: true },
];
---

<nav class="flex items-center gap-8">
  <!-- Main Navigation -->
  <ul class="hidden md:flex items-center gap-2">
    {navItems.map((item, index) => (
      <li>
        <a
          href={item.href}
          class:list={[
            "relative px-4 py-2 text-sm font-medium rounded-full transition-all duration-300",
            "hover:text-white",
            currentPath === item.href 
              ? "text-white bg-white/10 backdrop-blur-sm" 
              : "text-white/70",
            `stagger-${index + 1}`
          ]}
        >
          {item.label}
          {currentPath === item.href && (
            <span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 bg-indigo-400 rounded-full"></span>
          )}
        </a>
      </li>
    ))}
  </ul>
  
  <!-- Language Selector -->
  <div class="hidden md:flex items-center gap-1 ml-4">
    {languages.map((lang) => (
      <button
        class:list={[
          "px-3 py-1.5 text-sm font-medium rounded-full transition-all duration-300",
          lang.active 
            ? "bg-indigo-500/20 text-indigo-300 border border-indigo-500/30" 
            : "text-white/50 hover:text-white/80 hover:bg-white/5"
        ]}
      >
        {lang.label}
      </button>
    ))}
  </div>
  
  <!-- Mobile Menu Button -->
  <button 
    id="mobile-menu-btn"
    class="md:hidden p-2 rounded-lg glass hover:bg-white/10 transition-colors"
    aria-label="Abrir menú"
  >
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>
</nav>

<!-- Mobile Menu -->
<div id="mobile-menu" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-slate-950/90 backdrop-blur-xl"></div>
  <div class="relative h-full flex flex-col items-center justify-center gap-8 p-8">
    <button 
      id="close-menu-btn"
      class="absolute top-6 right-6 p-2 rounded-lg hover:bg-white/10 transition-colors"
      aria-label="Cerrar menú"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    
    <ul class="flex flex-col items-center gap-6">
      {navItems.map((item) => (
        <li>
          <a
            href={item.href}
            class:list={[
              "text-2xl font-semibold transition-colors",
              currentPath === item.href ? "text-indigo-400" : "text-white/80 hover:text-white"
            ]}
          >
            {item.label}
          </a>
        </li>
      ))}
    </ul>
    
    <div class="flex gap-4 mt-8">
      {languages.map((lang) => (
        <button
          class:list={[
            "px-6 py-2 text-lg font-medium rounded-full transition-all",
            lang.active 
              ? "bg-indigo-500 text-white" 
              : "text-white/60 hover:text-white border border-white/20"
          ]}
        >
          {lang.label}
        </button>
      ))}
    </div>
  </div>
</div>

<script type="module" lang="ts">
  import { initNavigationMenu } from '../scripts/navigation';

  initNavigationMenu();
</script>
